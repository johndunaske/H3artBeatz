{"ast":null,"code":"import _classCallCheck from\"/Users/johnduna/Documents/GitHub/H3artBeatz/heartbeats-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/johnduna/Documents/GitHub/H3artBeatz/heartbeats-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/johnduna/Documents/GitHub/H3artBeatz/heartbeats-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/johnduna/Documents/GitHub/H3artBeatz/heartbeats-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import GraphComponent from\"./GraphComponent\";import defaultImage from\"../Assets/testImage.jpg\";import TopBar from\"./TopBar\";import SpotifyPlayer from\"react-spotify-web-playback\";// props:\n// signout: function to remove spotify auth token cookie\n// token: spotify token\n// fPlaylist: favorite playlist\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var socket;var HomePage=/*#__PURE__*/function(_React$Component){_inherits(HomePage,_React$Component);var _super=_createSuper(HomePage);function HomePage(props){var _this;_classCallCheck(this,HomePage);_this=_super.call(this,props);_this.componentDidMount=function(){socket=new WebSocket(\"ws://https://h3artbeatz.herokuapp.com/websocket\");socket.addEventListener(\"open\",function(event){console.log(\"Websocket Connected!\");});socket.addEventListener(\"message\",function(event){var data=JSON.parse(event.BPM);var newList=[];if(_this.state.avg.length<15){newList=_this.state.avg.concat([data]);_this.setState({avg:newList});}if(_this.state.avg.length>=15){var sum=0;for(var i=0;i<15;i++){sum+=_this.state.avg[i];}var avgVal=sum/15;_this.setState({avgCalc:avgVal});}});socket.addEventListener(\"close\",function(event){console.log(\"Websocket Disconnected!\");});};_this.displayAlbum=function(state){if(state&&state.track&&state.track.image){_this.setState({albumCover:state.track.image});}};_this.state={favoritePlaylistLink:_this.props.fPlaylist!=null?_this.props.fPlaylist.uri:\"spotify:artist:6HQYnRM4OzToCYPpVBInuU\",favoritePlaylistId:_this.props.fPlaylist!=null?_this.props.fPlaylist.id:null,albumCover:defaultImage,avg:[],avgCalc:0};return _this;}_createClass(HomePage,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"mainContent\",children:[/*#__PURE__*/_jsx(TopBar,{logout:this.props.signout}),/*#__PURE__*/_jsx(\"div\",{className:\"currentSong\",children:this.state.currentSong}),/*#__PURE__*/_jsx(\"div\",{className:\"albumContainer\",children:/*#__PURE__*/_jsx(\"img\",{className:\"albumCover\",src:this.state.albumCover,alt:defaultImage})}),/*#__PURE__*/_jsx(GraphComponent,{}),/*#__PURE__*/_jsx(SpotifyPlayer,{token:this.props.token,callback:this.displayAlbum,uris:[this.state.favoritePlaylistLink],styles:{bgColor:\"#000\",sliderColor:\"#ff6384\",trackArtistColor:\"#fff\",trackNameColor:\"#fff\",color:\"#fff\"}})]});}}]);return HomePage;}(React.Component);export{HomePage as default};","map":{"version":3,"sources":["/Users/johnduna/Documents/GitHub/H3artBeatz/heartbeats-frontend/src/Components/HomePage.jsx"],"names":["React","GraphComponent","defaultImage","TopBar","SpotifyPlayer","socket","HomePage","props","componentDidMount","WebSocket","addEventListener","event","console","log","data","JSON","parse","BPM","newList","state","avg","length","concat","setState","sum","i","avgVal","avgCalc","displayAlbum","track","image","albumCover","favoritePlaylistLink","fPlaylist","uri","favoritePlaylistId","id","signout","currentSong","token","bgColor","sliderColor","trackArtistColor","trackNameColor","color","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport GraphComponent from \"./GraphComponent\";\nimport defaultImage from \"../Assets/testImage.jpg\";\nimport TopBar from \"./TopBar\";\nimport SpotifyPlayer from \"react-spotify-web-playback\";\n\n// props:\n// signout: function to remove spotify auth token cookie\n// token: spotify token\n// fPlaylist: favorite playlist\n\nvar socket;\nexport default class HomePage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      favoritePlaylistLink:\n        this.props.fPlaylist != null\n          ? this.props.fPlaylist.uri\n          : \"spotify:artist:6HQYnRM4OzToCYPpVBInuU\",\n      favoritePlaylistId:\n        this.props.fPlaylist != null ? this.props.fPlaylist.id : null,\n      albumCover: defaultImage,\n      avg: [],\n      avgCalc: 0,\n    };\n  }\n\n  componentDidMount = () => {\n    socket = new WebSocket(\"ws://https://h3artbeatz.herokuapp.com/websocket\");\n\n    socket.addEventListener(\"open\", (event) => {\n      console.log(\"Websocket Connected!\");\n    });\n\n    socket.addEventListener(\"message\", (event) => {\n      var data = JSON.parse(event.BPM);\n      var newList =[];\n      if (this.state.avg.length < 15) {\n        newList = this.state.avg.concat([data]);\n        this.setState({avg:newList});\n      }\n      if (this.state.avg.length >= 15) {\n        var sum = 0;\n        for (var i = 0; i < 15; i++) {\n          sum += this.state.avg[i]\n        }\n        var avgVal = sum / 15\n        this.setState({avgCalc: avgVal});\n      }\n    });\n\n    socket.addEventListener(\"close\", (event) => {\n      console.log(\"Websocket Disconnected!\");\n    });\n  };\n\n  displayAlbum = (state) => {\n    if (state && state.track && state.track.image) {\n      this.setState({ albumCover: state.track.image });\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"mainContent\">\n        <TopBar logout={this.props.signout} />\n        <div className=\"currentSong\">{this.state.currentSong}</div>\n        <div className=\"albumContainer\">\n          <img\n            className=\"albumCover\"\n            src={this.state.albumCover}\n            alt={defaultImage}\n          ></img>\n        </div>\n        <GraphComponent />\n        <SpotifyPlayer\n          token={this.props.token}\n          callback={this.displayAlbum}\n          uris={[this.state.favoritePlaylistLink]}\n          styles={{\n            bgColor: \"#000\",\n            sliderColor: \"#ff6384\",\n            trackArtistColor: \"#fff\",\n            trackNameColor: \"#fff\",\n            color: \"#fff\",\n          }}\n        />\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}