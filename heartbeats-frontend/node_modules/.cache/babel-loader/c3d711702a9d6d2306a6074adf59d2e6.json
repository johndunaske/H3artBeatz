{"ast":null,"code":"import _classCallCheck from\"/Users/johnduna/Documents/GitHub/H3artBeatz/heartbeats-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/johnduna/Documents/GitHub/H3artBeatz/heartbeats-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/johnduna/Documents/GitHub/H3artBeatz/heartbeats-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/johnduna/Documents/GitHub/H3artBeatz/heartbeats-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import GraphComponent from\"./GraphComponent\";import defaultImage from\"../Assets/testImage.jpg\";import TopBar from\"./TopBar\";import SpotifyPlayer from\"react-spotify-web-playback\";// props:\n// signout: function to remove spotify auth token cookie\n// token: spotify token\n// fPlaylist: favorite playlist\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var socket;var count=0;var HomePage=/*#__PURE__*/function(_React$Component){_inherits(HomePage,_React$Component);var _super=_createSuper(HomePage);function HomePage(props){var _this;_classCallCheck(this,HomePage);_this=_super.call(this,props);_this.componentDidMount=function(){socket=new WebSocket(\"ws://https://h3artbeatz.herokuapp.com/websocket\");socket.addEventListener(\"open\",function(event){console.log(\"Websocket Connected!\");});socket.addEventListener(\"message\",function(event){var data=JSON.parse(event.BPM);var newList=[];if(_this.state.avg.length<15){newList=_this.state.avg.concat([data]);_this.setState({avg:newList});}if(_this.state.avg.length>=15){var sum=0;for(var i=0;i<15;i++){sum+=_this.state.avg[i];}var avgVal=sum/15;_this.setState({avgCalc:avgVal});}if(count>20){var newList=_this.state.hrReadings.concat([data]);var lastX=_this.state.xAxis[_this.state.xAxis.length-1];var newX=_this.state.xAxis.concat(_this.state.xAxis[lastX]);_this.setState({hrReadings:newList});_this.setState({xAxis:lastX});count=0;}count++;});socket.addEventListener(\"close\",function(event){console.log(\"Websocket Disconnected!\");});};_this.displayAlbum=function(state){if(state&&state.track&&state.track.image){_this.setState({albumCover:state.track.image});}};_this.state={favoritePlaylistLink:_this.props.fPlaylist!=null?_this.props.fPlaylist.uri:\"spotify:artist:6HQYnRM4OzToCYPpVBInuU\",favoritePlaylistId:_this.props.fPlaylist!=null?_this.props.fPlaylist.id:null,albumCover:defaultImage,avg:[],avgCalc:0,hrReadings:[100],xAxis:[0]};return _this;}_createClass(HomePage,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"mainContent\",children:[/*#__PURE__*/_jsx(TopBar,{logout:this.props.signout}),/*#__PURE__*/_jsx(\"div\",{className:\"currentSong\",children:this.state.currentSong}),/*#__PURE__*/_jsx(\"div\",{className:\"albumContainer\",children:/*#__PURE__*/_jsx(\"img\",{className:\"albumCover\",src:this.state.albumCover,alt:defaultImage})}),/*#__PURE__*/_jsx(GraphComponent,{}),/*#__PURE__*/_jsx(SpotifyPlayer,{token:this.props.token,callback:this.displayAlbum,uris:[this.state.favoritePlaylistLink],styles:{bgColor:\"#000\",sliderColor:\"#ff6384\",trackArtistColor:\"#fff\",trackNameColor:\"#fff\",color:\"#fff\"}})]});}}]);return HomePage;}(React.Component);export{HomePage as default};","map":{"version":3,"sources":["/Users/johnduna/Documents/GitHub/H3artBeatz/heartbeats-frontend/src/Components/HomePage.jsx"],"names":["React","GraphComponent","defaultImage","TopBar","SpotifyPlayer","socket","count","HomePage","props","componentDidMount","WebSocket","addEventListener","event","console","log","data","JSON","parse","BPM","newList","state","avg","length","concat","setState","sum","i","avgVal","avgCalc","hrReadings","lastX","xAxis","newX","displayAlbum","track","image","albumCover","favoritePlaylistLink","fPlaylist","uri","favoritePlaylistId","id","signout","currentSong","token","bgColor","sliderColor","trackArtistColor","trackNameColor","color","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport GraphComponent from \"./GraphComponent\";\nimport defaultImage from \"../Assets/testImage.jpg\";\nimport TopBar from \"./TopBar\";\nimport SpotifyPlayer from \"react-spotify-web-playback\";\n\n// props:\n// signout: function to remove spotify auth token cookie\n// token: spotify token\n// fPlaylist: favorite playlist\n\nvar socket;\nvar count = 0;\nexport default class HomePage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      favoritePlaylistLink:\n        this.props.fPlaylist != null\n          ? this.props.fPlaylist.uri\n          : \"spotify:artist:6HQYnRM4OzToCYPpVBInuU\",\n      favoritePlaylistId:\n        this.props.fPlaylist != null ? this.props.fPlaylist.id : null,\n      albumCover: defaultImage,\n      avg: [],\n      avgCalc: 0,\n      hrReadings: [100],\n      xAxis: [0],\n    };\n  }\n\n  componentDidMount = () => {\n    socket = new WebSocket(\"ws://https://h3artbeatz.herokuapp.com/websocket\");\n\n    socket.addEventListener(\"open\", (event) => {\n      console.log(\"Websocket Connected!\");\n    });\n\n    socket.addEventListener(\"message\", (event) => {\n      var data = JSON.parse(event.BPM);\n      var newList =[];\n      if (this.state.avg.length < 15) {\n        newList = this.state.avg.concat([data]);\n        this.setState({avg:newList});\n      }\n      if (this.state.avg.length >= 15) {\n        var sum = 0;\n        for (var i = 0; i < 15; i++) {\n          sum += this.state.avg[i]\n        }\n        var avgVal = sum / 15\n        this.setState({avgCalc: avgVal});\n      }\n      if (count > 20) {\n        var newList = this.state.hrReadings.concat([data]);\n        var lastX = this.state.xAxis[this.state.xAxis.length - 1]\n        var newX = this.state.xAxis.concat(this.state.xAxis[lastX])\n        this.setState({hrReadings:newList});\n        this.setState({xAxis:lastX});\n        count = 0;\n      }\n\n      count++;\n    });\n\n    socket.addEventListener(\"close\", (event) => {\n      console.log(\"Websocket Disconnected!\");\n    });\n  };\n\n  displayAlbum = (state) => {\n    if (state && state.track && state.track.image) {\n      this.setState({ albumCover: state.track.image });\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"mainContent\">\n        <TopBar logout={this.props.signout} />\n        <div className=\"currentSong\">{this.state.currentSong}</div>\n        <div className=\"albumContainer\">\n          <img\n            className=\"albumCover\"\n            src={this.state.albumCover}\n            alt={defaultImage}\n          ></img>\n        </div>\n        <GraphComponent />\n        <SpotifyPlayer\n          token={this.props.token}\n          callback={this.displayAlbum}\n          uris={[this.state.favoritePlaylistLink]}\n          styles={{\n            bgColor: \"#000\",\n            sliderColor: \"#ff6384\",\n            trackArtistColor: \"#fff\",\n            trackNameColor: \"#fff\",\n            color: \"#fff\",\n          }}\n        />\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}