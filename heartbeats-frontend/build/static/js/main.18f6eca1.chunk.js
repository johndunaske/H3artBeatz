(this["webpackJsonpheartbeats-frontend"]=this["webpackJsonpheartbeats-frontend"]||[]).push([[0],{35:function(t,e,a){},36:function(t,e,a){},39:function(t,e,a){"use strict";a.r(e);var s,n=a(0),i=a.n(n),c=a(18),o=a.n(c),r=(a(35),a(2)),l=a(3),d=a(5),u=a(4),p=(a(36),a(28)),h=a(1),j=function(t){Object(d.a)(a,t);var e=Object(u.a)(a);function a(t){var s;return Object(r.a)(this,a),(s=e.call(this,t)).addItem=function(){var t=0,e=0,a=0,n=0;s.state.hrReadings.length>=s.state.maxReadings?(t=s.state.hrReadings[9],e=s.state.xAxis[9],a=s.state.hrReadings.slice(1).concat(t+20),n=s.state.xAxis.slice(1).concat(e+.5)):(t=s.state.hrReadings[s.state.hrReadings.length-1],e=s.state.xAxis[s.state.xAxis.length-1],a=s.state.hrReadings.concat(t+20),n=s.state.xAxis.concat(e+.5)),s.setState({xAxis:n,hrReadings:a})},s.state={hrReadings:s.props.hrReadings,xAxis:s.props.xAxis,maxReadings:10,options:{elements:{point:{radius:0}},plugins:{legend:{display:!1}},scales:{x:{display:!1},y:{display:!1,suggestedMin:40,suggestedMax:200}}}},s}return Object(l.a)(a,[{key:"render",value:function(){var t={labels:this.state.xAxis,datasets:[{data:this.state.hrReadings,fill:!1,backgroundColor:"rgb(255, 99, 132)",borderColor:"rgba(255, 99, 132, 0.7)",borderWidth:5,tension:.2}]};return Object(h.jsx)("div",{className:"graphContainer",children:Object(h.jsx)(p.a,{className:"lineGraph",options:this.state.options,data:t})})}}]),a}(i.a.Component),b=a.p+"static/media/testImage.26d51764.jpg",m=a(13),v=function(t){Object(d.a)(a,t);var e=Object(u.a)(a);function a(t){return Object(r.a)(this,a),e.call(this,t)}return Object(l.a)(a,[{key:"render",value:function(){return Object(h.jsxs)("div",{className:"topBar",children:[Object(h.jsx)("div",{className:"signInButton topBarButton",onClick:this.props.logout,children:"Sign Out"}),Object(h.jsx)("div",{className:"profileButton topBarButton"}),Object(h.jsx)("div",{className:"bpmButton topBarButton",children:"Sport"}),Object(h.jsxs)("div",{className:"pageHeader",children:[Object(h.jsx)("span",{className:"heart",children:"H3art"}),"Beatz"]}),Object(h.jsx)("div",{className:"invertedButton topBarButton",children:"BPMFlip"}),Object(h.jsx)("div",{className:"therapyModeButton topBarButton",children:"Therapy"}),Object(h.jsx)(m.b,{to:"/playlist",className:"settingsButton topBarButton",children:"Playlists"})]})}}]),a}(i.a.Component),f=a(27),x=0,g=function(t){Object(d.a)(a,t);var e=Object(u.a)(a);function a(t){var n;return Object(r.a)(this,a),(n=e.call(this,t)).componentDidMount=function(){(s=new WebSocket("ws://https://h3artbeatz.herokuapp.com/websocket")).addEventListener("open",(function(t){console.log("Websocket Connected!")})),s.addEventListener("message",(function(t){var e=JSON.parse(t.BPM),a=[];if(n.state.avg.length<15&&(a=n.state.avg.concat([e]),n.setState({avg:a})),n.state.avg.length>=15){for(var s=0,i=0;i<15;i++)s+=n.state.avg[i];var c=s/15;n.setState({avgCalc:c})}if(x>20){a=n.state.hrReadings.concat([e]);var o=n.state.xAxis[n.state.xAxis.length-1];n.state.xAxis.concat(n.state.xAxis[o]);n.setState({hrReadings:a}),n.setState({xAxis:o}),x=0}x++})),s.addEventListener("close",(function(t){console.log("Websocket Disconnected!")}))},n.displayAlbum=function(t){t&&t.track&&t.track.image&&n.setState({albumCover:t.track.image})},n.state={favoritePlaylistLink:null!=n.props.fPlaylist?n.props.fPlaylist.uri:"spotify:artist:6HQYnRM4OzToCYPpVBInuU",favoritePlaylistId:null!=n.props.fPlaylist?n.props.fPlaylist.id:null,albumCover:b,avg:[],avgCalc:0,hrReadings:[100],xAxis:[0]},n}return Object(l.a)(a,[{key:"render",value:function(){return Object(h.jsxs)("div",{className:"mainContent",children:[Object(h.jsx)(v,{logout:this.props.signout}),Object(h.jsx)("div",{className:"currentSong",children:this.state.currentSong}),Object(h.jsx)("div",{className:"albumContainer",children:Object(h.jsx)("img",{className:"albumCover",src:this.state.albumCover,alt:b})}),Object(h.jsx)(j,{}),Object(h.jsx)(f.a,{token:this.props.token,callback:this.displayAlbum,uris:[this.state.favoritePlaylistLink],styles:{bgColor:"#000",sliderColor:"#ff6384",trackArtistColor:"#fff",trackNameColor:"#fff",color:"#fff"}})]})}}]),a}(i.a.Component),O=["user-read-playback-state","streaming","user-read-email","user-read-private","user-modify-playback-state","user-library-read","user-library-modify"],y=window.location.hash.substring(1).split("&").reduce((function(t,e){if(e){var a=e.split("=");t[a[0]]=decodeURIComponent(a[1])}return t}),{});window.location.hash="";var k=function(t){Object(d.a)(a,t);var e=Object(u.a)(a);function a(t){var s;return Object(r.a)(this,a),(s=e.call(this,t)).componentDidMount=function(){var t=y.access_token;t&&(s.setState({token:t}),s.props.updateToken(t))},s.state={token:""},s}return Object(l.a)(a,[{key:"render",value:function(){return Object(h.jsxs)("div",{className:"mainContainer",children:[Object(h.jsxs)("div",{className:"pageHeader",children:[Object(h.jsx)("span",{className:"heart",children:"H3art"}),"Beatz"]}),Object(h.jsx)("div",{className:"loginContainer",children:Object(h.jsxs)("div",{className:"loginWindow",children:[Object(h.jsx)("div",{className:"loginHeader",children:"Login"}),""===this.state.token?Object(h.jsx)("a",{className:"loginButton",href:"".concat("https://accounts.spotify.com/authorize?","client_id=").concat("0f76c14b4897491db4970cd235a10161","&redirect_uri=").concat("http://localhost:3000","&scope=").concat(O.join("%20"),"&response_type=token&show_dialog=true"),children:"Login With Spotify"}):Object(h.jsx)("div",{})]})})]})}}]),a}(i.a.Component),N=a(29),C=a(6),B=function(t){Object(d.a)(a,t);var e=Object(u.a)(a);function a(t){var s;return Object(r.a)(this,a),(s=e.call(this,t)).componentDidMount=function(){s.props.playlistMethod()},s.state={currentlySelected:null},s}return Object(l.a)(a,[{key:"render",value:function(){var t=this;return Object(h.jsxs)("div",{className:"playlistPageContent",children:[Object(h.jsx)("div",{className:"topBar",children:Object(h.jsxs)("div",{className:"pageHeader",children:[Object(h.jsx)("span",{className:"heart",children:"H3art"}),"Beatz"]})}),Object(h.jsx)(m.b,{to:"/",className:"backButton",children:"Back"}),Object(h.jsx)("div",{className:"playlistHeader",children:"Playlists:"}),Object(h.jsx)("div",{className:"playlistsContainer",children:this.props.playlists.map((function(e){return Object(h.jsxs)("div",{className:t.state.currentlySelected===e.name?"playlistItem selected":"playlistItem",children:[Object(h.jsx)("div",{className:"pName",children:e.name}),Object(h.jsx)("div",{className:"selectButton",onClick:function(){t.props.favoritePlaylist(e),t.setState({currentlySelected:e.name})},children:"Favorite"})]},e.name)}))})]})}}]),a}(i.a.Component),P=new N.a,S=function(t){Object(d.a)(a,t);var e=Object(u.a)(a);function a(t){var s;return Object(r.a)(this,a),(s=e.call(this,t)).getPlaylists=function(){fetch("https://api.spotify.com/v1/me/playlists",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+s.state.token}}).then((function(t){return t.json()})).then((function(t){s.setState({playlists:t.items})}))},s.setFavoritePlaylist=function(t){s.setState({favoritePlaylist:t})},s.setToken=function(t){P.set("spotifyToken",t,{path:"/"}),s.setState({token:t})},s.removeToken=function(){P.remove("spotifyToken"),s.setState({token:null})},s.state={token:P.get("spotifyToken"),playlists:[],favoritePlaylist:null},s}return Object(l.a)(a,[{key:"render",value:function(){return Object(h.jsx)("div",{className:"App",children:Object(h.jsx)(m.a,{children:Object(h.jsxs)(C.c,{children:[Object(h.jsx)(C.a,{path:"/playlist",element:Object(h.jsx)(B,{playlistMethod:this.getPlaylists,playlists:this.state.playlists,favoritePlaylist:this.setFavoritePlaylist})}),null!=this.state.token?Object(h.jsx)(C.a,{path:"/",element:Object(h.jsx)(g,{signout:this.removeToken,token:this.state.token,fPlaylist:this.state.favoritePlaylist})}):Object(h.jsx)(C.a,{path:"/",element:Object(h.jsx)(k,{updateToken:this.setToken})})]})})})}}]),a}(i.a.Component),A=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,40)).then((function(e){var a=e.getCLS,s=e.getFID,n=e.getFCP,i=e.getLCP,c=e.getTTFB;a(t),s(t),n(t),i(t),c(t)}))};o.a.render(Object(h.jsx)(i.a.StrictMode,{children:Object(h.jsx)(S,{})}),document.getElementById("root")),A()}},[[39,1,2]]]);
//# sourceMappingURL=main.18f6eca1.chunk.js.map